<?php 

function BinarySearchCount($list, $lenghtList, $item2find, $variation){

	//Default values of indexes 
	$lowerIndex = 0;
	$upperIndex = $lenghtList-1;
	$middleIndex = ($lowerIndex + $upperIndex)/2;
	$item2find_index = -1;

  while ( $lowerIndex <= $upperIndex) {

		//Compare the middle value with the item in question
		if ($list[$middleIndex] == $item2find) {
			
			$item2find_index = $middleIndex;

      // Variation to find the first occurence
			if ($variation=='First') {
				$upperIndex = $middleIndex-1;					
			}
      
			// Variation to find the last occurence
			elseif ($variation=='Last') {
				$upperIndex = $middleIndex+1;					
			}

		// look only at left half of list
		} elseif ($item2find < $list[$middleIndex]){
			$upperIndex = $middleIndex-1;

		// look only at right half of list
		} else{
			$lowerIndex = $middleIndex+1;
		}

    return $item2find_index;

	} // End of while

} //End Private Function BinarySearchCount
